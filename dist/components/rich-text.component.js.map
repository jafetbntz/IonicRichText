{"version":3,"file":"rich-text.component.js","sourceRoot":"","sources":["../../src/components/rich-text.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, ViewChild, ElementRef, Input, OnInit } from \"@angular/core\";\r\nimport { FormControl } from \"@angular/forms\";\r\nimport { IonInput } from \"@ionic/angular\";\r\nimport { RichTextOptions } from \"./rich-text-options.interface\";\r\nimport {\r\n  faBold,\r\n  faItalic,\r\n  faUnderline,\r\n  faStrikethrough,\r\n  faAlignLeft,\r\n  faAlignCenter,\r\n  faAlignRight,\r\n  faAlignJustify,\r\n  faListOl,\r\n  faListUl,\r\n  IconDefinition,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\n\r\n@Component({\r\n  selector: \"rich-text\",\r\n  templateUrl: \"rich-text.component.html\",\r\n  styleUrls: [\"rich-text.component.scss\"],\r\n})\r\nexport class RichTextComponent implements OnInit {\r\n  faBold: IconDefinition = faBold;\r\n  faItalic: IconDefinition = faItalic;\r\n  faUnderline: IconDefinition = faUnderline;\r\n  faStrikethrough: IconDefinition = faStrikethrough;\r\n  faAlignLeft: IconDefinition = faAlignLeft;\r\n  faAlignCenter: IconDefinition = faAlignCenter;\r\n  faAlignRight: IconDefinition = faAlignRight;\r\n  faAlignJustify: IconDefinition = faAlignJustify;\r\n  faListOl: IconDefinition = faListOl;\r\n  faListUl: IconDefinition = faListUl;\r\n\r\n  constructor() {}\r\n\r\n  @ViewChild(\"editor\") editor: IonInput;\r\n  @ViewChild(\"decorate\") decorate: ElementRef;\r\n  @ViewChild(\"styler\") styler: ElementRef;\r\n\r\n  @Input() formControlItem: FormControl;\r\n  @Input() options: RichTextOptions = {};\r\n  @Input() placeholderText: string;\r\n\r\n  ngOnInit() {\r\n    this.options = {\r\n      undo: this.options.undo != undefined ? this.options.undo : true,\r\n      redo: this.options.redo != undefined ? this.options.redo : true,\r\n      bold: this.options.bold != undefined ? this.options.bold : true,\r\n      italic: this.options.italic != undefined ? this.options.italic : true,\r\n      underline:\r\n        this.options.underline != undefined ? this.options.underline : true,\r\n      largeText:\r\n        this.options.largeText != undefined ? this.options.largeText : true,\r\n      smallText:\r\n        this.options.smallText != undefined ? this.options.smallText : true,\r\n      alignLeft:\r\n        this.options.alignLeft != undefined ? this.options.alignLeft : true,\r\n      alignCenter:\r\n        this.options.alignCenter != undefined ? this.options.alignCenter : true,\r\n      alignRight:\r\n        this.options.alignRight != undefined ? this.options.alignRight : true,\r\n      justify: this.options.justify != undefined ? this.options.justify : true,\r\n      lineJump:\r\n        this.options.lineJump != undefined ? this.options.lineJump : true,\r\n      orderedList:\r\n        this.options.orderedList != undefined ? this.options.orderedList : true,\r\n      unorderedList:\r\n        this.options.unorderedList != undefined\r\n          ? this.options.unorderedList\r\n          : true,\r\n      strikethrough:\r\n        this.options.strikethrough != undefined\r\n          ? this.options.strikethrough\r\n          : true,\r\n      canClose: this.options.canClose,\r\n    };\r\n  }\r\n\r\n  uniqueId = `editor${Math.floor(Math.random() * 1000000)}`;\r\n  showDecorator = false;\r\n\r\n  // private stringTools = {\r\n  //   isNullOrWhiteSpace: (value: string) => {\r\n  //     if (value == null || value == undefined) {\r\n  //       return true;\r\n  //     }\r\n  //     value = value.replace(/[\\n\\r]/g, '');\r\n  //     value = value.split(' ').join('');\r\n\r\n  //     return value.length === 0;\r\n  //   }\r\n  // };\r\n\r\n  private updateItem() {\r\n    // const element = this.editor.getNativeElement();\r\n    // element.innerHTML = this.formControlItem.value;\r\n    this.editor.value = this.formControlItem.value;\r\n\r\n    const reactToChangeEvent = () => {\r\n      // if (this.stringTools.isNullOrWhiteSpace(element.innerText)) {\r\n      //   element.innerHTML = '<div></div>';\r\n      //   this.formControlItem.setValue(null);\r\n      // } else {\r\n      // this.formControlItem.setValue(element.innerHTML);\r\n      this.formControlItem.setValue(this.editor.value);\r\n\r\n      // }\r\n    };\r\n    this.editor.ionChange.asObservable().subscribe(() => reactToChangeEvent());\r\n    this.editor.ionInput.asObservable().subscribe(() => reactToChangeEvent());\r\n\r\n    // element.onchange = reactToChangeEvent;\r\n    // element.onkeyup = reactToChangeEvent;\r\n    // element.onpaste = reactToChangeEvent;\r\n    // element.oninput = reactToChangeEvent;\r\n  }\r\n\r\n  private wireupButtons() {\r\n    let buttons = (\r\n      this.decorate.nativeElement as HTMLDivElement\r\n    ).getElementsByTagName(\"button\");\r\n    for (let i = 0; i < buttons.length; i++) {\r\n      let button = buttons[i];\r\n\r\n      let command = button.getAttribute(\"data-command\");\r\n      if (command) {\r\n        if (command.includes(\"|\")) {\r\n          let parameter = command.split(\"|\")[1];\r\n          command = command.split(\"|\")[0];\r\n\r\n          button.addEventListener(\"click\", () => {\r\n            document.execCommand(command, false, parameter);\r\n            // this.editor.getNativeElement().focus();\r\n            this.editor.setFocus();\r\n          });\r\n        } else {\r\n          button.addEventListener(\"click\", () => {\r\n            document.execCommand(command);\r\n            // this.editor.getNativeElement().focus();\r\n            this.editor.setFocus();\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  ngAfterContentInit() {\r\n    this.updateItem();\r\n    this.wireupButtons();\r\n  }\r\n\r\n  toggleDecorator() {\r\n    this.showDecorator = !this.showDecorator;\r\n    // this.editor.getNativeElement().focus();\r\n    this.editor.setFocus();\r\n  }\r\n}\r\n"]}